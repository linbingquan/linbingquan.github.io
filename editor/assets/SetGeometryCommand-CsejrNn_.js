import{ObjectLoader as e}from"three";var t=class e{constructor(e){this.dom=e}add(){for(let t=0;t<arguments.length;t++){let n=arguments[t];n instanceof e?this.dom.appendChild(n.dom):console.error(`UIElement:`,n,`is not an instance of UIElement.`)}return this}remove(){for(let t=0;t<arguments.length;t++){let n=arguments[t];n instanceof e?this.dom.removeChild(n.dom):console.error(`UIElement:`,n,`is not an instance of UIElement.`)}return this}clear(){for(;this.dom.children.length;)this.dom.removeChild(this.dom.lastChild)}setId(e){return this.dom.id=e,this}getId(){return this.dom.id}setClass(e){return this.dom.className=e,this}addClass(e){return this.dom.classList.add(e),this}removeClass(e){return this.dom.classList.remove(e),this}toggleClass(e,t){return this.dom.classList.toggle(e,t),this}setStyle(e,t){for(let n=0;n<t.length;n++)this.dom.style[e]=t[n];return this}setHidden(e){return this.dom.hidden=e,this}isHidden(){return this.dom.hidden}setDisabled(e){return this.dom.disabled=e,this}setTextContent(e){return this.dom.textContent=e,this}setInnerHTML(e){this.dom.innerHTML=e}getIndexOfChild(e){return Array.prototype.indexOf.call(this.dom.children,e.dom)}};`position.left.top.right.bottom.width.height.display.verticalAlign.overflow.color.background.backgroundColor.opacity.border.borderLeft.borderTop.borderRight.borderBottom.borderColor.margin.marginLeft.marginTop.marginRight.marginBottom.padding.paddingLeft.paddingTop.paddingRight.paddingBottom.fontSize.fontWeight.textAlign.textDecoration.textTransform.cursor.zIndex`.split(`.`).forEach(function(e){let n=`set`+e.substring(0,1).toUpperCase()+e.substring(1);t.prototype[n]=function(){return this.setStyle(e,arguments),this}}),[`KeyUp`,`KeyDown`,`MouseOver`,`MouseOut`,`Click`,`DblClick`,`Change`,`Input`].forEach(function(e){let n=`on`+e;t.prototype[n]=function(t){return this.dom.addEventListener(e.toLowerCase(),t.bind(this)),this}});var n=class extends t{constructor(){super(document.createElement(`span`))}},r=class extends t{constructor(){super(document.createElement(`div`))}},i=class extends r{constructor(){super(),this.dom.className=`Row`}},a=class extends r{constructor(){super(),this.dom.className=`Panel`}},o=class extends n{constructor(e){super(),this.dom.className=`Text`,this.dom.style.cursor=`default`,this.dom.style.display=`inline-block`,this.setValue(e)}getValue(){return this.dom.textContent}setValue(e){return e!==void 0&&(this.dom.textContent=e),this}},s=class extends t{constructor(e){super(document.createElement(`input`)),this.dom.className=`Input`,this.dom.style.padding=`2px`,this.dom.style.border=`1px solid transparent`,this.dom.setAttribute(`autocomplete`,`off`),this.dom.addEventListener(`keydown`,function(e){e.stopPropagation()}),this.setValue(e)}getValue(){return this.dom.value}setValue(e){return this.dom.value=e,this}},c=class extends t{constructor(){super(document.createElement(`textarea`)),this.dom.className=`TextArea`,this.dom.style.padding=`2px`,this.dom.spellcheck=!1,this.dom.setAttribute(`autocomplete`,`off`),this.dom.addEventListener(`keydown`,function(e){if(e.stopPropagation(),e.code===`Tab`){e.preventDefault();let t=this.selectionStart;this.value=this.value.substring(0,t)+`	`+this.value.substring(t),this.selectionStart=t+1,this.selectionEnd=this.selectionStart}})}getValue(){return this.dom.value}setValue(e){return this.dom.value=e,this}},l=class extends t{constructor(){super(document.createElement(`select`)),this.dom.className=`Select`,this.dom.style.padding=`2px`,this.dom.setAttribute(`autocomplete`,`off`),this.dom.addEventListener(`pointerdown`,function(e){e.stopPropagation()})}setMultiple(e){return this.dom.multiple=e,this}setOptions(e){let t=this.dom.value;for(;this.dom.children.length>0;)this.dom.removeChild(this.dom.firstChild);for(let t in e){let n=document.createElement(`option`);n.value=t,n.innerHTML=e[t],this.dom.appendChild(n)}return this.dom.value=t,this}getValue(){return this.dom.value}setValue(e){return e=String(e),this.dom.value!==e&&(this.dom.value=e),this}},u=class extends t{constructor(e){super(document.createElement(`input`)),this.dom.className=`Checkbox Input`,this.dom.type=`checkbox`,this.dom.addEventListener(`pointerdown`,function(e){e.stopPropagation()}),this.setValue(e)}getValue(){return this.dom.checked}setValue(e){return e!==void 0&&(this.dom.checked=e),this}},d=class extends t{constructor(){super(document.createElement(`input`)),this.dom.className=`Color Input`,this.dom.style.width=`32px`,this.dom.style.height=`16px`,this.dom.style.border=`0px`,this.dom.style.padding=`2px`,this.dom.style.backgroundColor=`transparent`,this.dom.setAttribute(`autocomplete`,`off`);try{this.dom.type=`color`,this.dom.value=`#ffffff`}catch{}}getValue(){return this.dom.value}getHexValue(){return parseInt(this.dom.value.substring(1),16)}setValue(e){return this.dom.value=e,this}setHexValue(e){return this.dom.value=`#`+(`000000`+e.toString(16)).slice(-6),this}},f=class extends t{constructor(e){super(document.createElement(`input`)),this.dom.style.cursor=`ns-resize`,this.dom.className=`Number Input`,this.dom.value=`0.00`,this.dom.setAttribute(`autocomplete`,`off`),this.value=0,this.min=-1/0,this.max=1/0,this.precision=2,this.step=1,this.unit=``,this.nudge=.01,this.setValue(e);let t=this,n=new Event(`change`,{bubbles:!0,cancelable:!0}),r=0,i=0,a={x:0,y:0},o={x:0,y:0};function s(e){document.activeElement!==t.dom&&(e.preventDefault(),r=0,i=t.value,o.x=e.clientX,o.y=e.clientY,t.dom.setPointerCapture(e.pointerId),t.dom.addEventListener(`pointermove`,c),t.dom.addEventListener(`pointerup`,l))}function c(e){let s=t.value;a.x=e.clientX,a.y=e.clientY,r+=a.x-o.x-(a.y-o.y);let c=i+r/(e.shiftKey?5:50)*t.step;c=Math.min(t.max,Math.max(t.min,c)),s!==c&&(t.setValue(c),t.dom.dispatchEvent(n)),o.x=e.clientX,o.y=e.clientY}function l(e){t.dom.releasePointerCapture(e.pointerId),t.dom.removeEventListener(`pointermove`,c),t.dom.removeEventListener(`pointerup`,l),Math.abs(r)<2&&(t.dom.focus(),t.dom.select())}function u(){t.setValue(t.dom.value)}function d(){t.dom.style.backgroundColor=``,t.dom.style.cursor=``}function f(){t.dom.style.backgroundColor=`transparent`,t.dom.style.cursor=`ns-resize`}function p(e){switch(e.stopPropagation(),e.code){case`Enter`:t.dom.blur();break;case`ArrowUp`:e.preventDefault(),t.setValue(t.getValue()+t.nudge),t.dom.dispatchEvent(n);break;case`ArrowDown`:e.preventDefault(),t.setValue(t.getValue()-t.nudge),t.dom.dispatchEvent(n);break}}f(),this.dom.addEventListener(`keydown`,p),this.dom.addEventListener(`pointerdown`,s),this.dom.addEventListener(`change`,u),this.dom.addEventListener(`focus`,d),this.dom.addEventListener(`blur`,f)}getValue(){return this.value}setValue(e){return e!==void 0&&(e=parseFloat(e),e<this.min&&(e=this.min),e>this.max&&(e=this.max),this.value=e,this.dom.value=e.toFixed(this.precision),this.unit!==``&&(this.dom.value+=` `+this.unit)),this}setPrecision(e){return this.precision=e,this}setStep(e){return this.step=e,this}setNudge(e){return this.nudge=e,this}setRange(e,t){return this.min=e,this.max=t,this}setUnit(e){return this.unit=e,this.setValue(this.value),this}},p=class extends t{constructor(e){super(document.createElement(`input`)),this.dom.style.cursor=`ns-resize`,this.dom.className=`Number Input`,this.dom.value=`0`,this.dom.setAttribute(`autocomplete`,`off`),this.value=0,this.min=-1/0,this.max=1/0,this.step=1,this.nudge=1,this.setValue(e);let t=this,n=new Event(`change`,{bubbles:!0,cancelable:!0}),r=0,i=0,a={x:0,y:0},o={x:0,y:0};function s(e){document.activeElement!==t.dom&&(e.preventDefault(),r=0,i=t.value,o.x=e.clientX,o.y=e.clientY,t.dom.setPointerCapture(e.pointerId),t.dom.addEventListener(`pointermove`,c),t.dom.addEventListener(`pointerup`,l))}function c(e){let s=t.value;a.x=e.clientX,a.y=e.clientY,r+=a.x-o.x-(a.y-o.y);let c=i+r/(e.shiftKey?5:50)*t.step;c=Math.min(t.max,Math.max(t.min,c))|0,s!==c&&(t.setValue(c),t.dom.dispatchEvent(n)),o.x=e.clientX,o.y=e.clientY}function l(e){t.dom.releasePointerCapture(e.pointerId),t.dom.removeEventListener(`pointermove`,c),t.dom.removeEventListener(`pointerup`,l),Math.abs(r)<2&&(t.dom.focus(),t.dom.select())}function u(){t.setValue(t.dom.value)}function d(){t.dom.style.backgroundColor=``,t.dom.style.cursor=``}function f(){t.dom.style.backgroundColor=`transparent`,t.dom.style.cursor=`ns-resize`}function p(e){switch(e.stopPropagation(),e.code){case`Enter`:t.dom.blur();break;case`ArrowUp`:e.preventDefault(),t.setValue(t.getValue()+t.nudge),t.dom.dispatchEvent(n);break;case`ArrowDown`:e.preventDefault(),t.setValue(t.getValue()-t.nudge),t.dom.dispatchEvent(n);break}}f(),this.dom.addEventListener(`keydown`,p),this.dom.addEventListener(`pointerdown`,s),this.dom.addEventListener(`change`,u),this.dom.addEventListener(`focus`,d),this.dom.addEventListener(`blur`,f)}getValue(){return this.value}setValue(e){return e!==void 0&&(e=parseInt(e),this.value=e,this.dom.value=e),this}setStep(e){return this.step=parseInt(e),this}setNudge(e){return this.nudge=e,this}setRange(e,t){return this.min=e,this.max=t,this}},m=class extends t{constructor(){super(document.createElement(`br`)),this.dom.className=`Break`}},h=class extends t{constructor(){super(document.createElement(`hr`)),this.dom.className=`HorizontalRule`}},g=class extends t{constructor(e){super(document.createElement(`button`)),this.dom.className=`Button`,this.dom.textContent=e}},_=class extends r{constructor(){super(),this.dom.className=`TabbedPanel`,this.tabs=[],this.panels=[],this.tabsDiv=new r,this.tabsDiv.setClass(`Tabs`),this.panelsDiv=new r,this.panelsDiv.setClass(`Panels`),this.add(this.tabsDiv),this.add(this.panelsDiv),this.selected=``}select(e){let t,n,r=this;if(this.selected&&this.selected.length&&(t=this.tabs.find(function(e){return e.dom.id===r.selected}),n=this.panels.find(function(e){return e.dom.id===r.selected}),t&&t.removeClass(`selected`),n&&n.setDisplay(`none`)),t=this.tabs.find(function(t){return t.dom.id===e}),n=this.panels.find(function(t){return t.dom.id===e}),t&&t.addClass(`selected`),n&&n.setDisplay(``),this.selected=e,t){let e=t.dom.offsetLeft+t.dom.offsetWidth,n=this.tabsDiv.dom.getBoundingClientRect().width;e>n&&this.tabsDiv.dom.scrollTo({left:e-n,behavior:`smooth`}),t.dom.offsetLeft<this.tabsDiv.dom.scrollLeft&&this.tabsDiv.dom.scrollTo({left:0,behavior:`smooth`})}return this}addTab(e,t,n){let i=new v(t,this);i.setId(e),this.tabs.push(i),this.tabsDiv.add(i);let a=new r;a.setId(e),a.add(n),a.setDisplay(`none`),this.panels.push(a),this.panelsDiv.add(a),this.select(e)}},v=class extends o{constructor(e,t){super(e),this.dom.className=`Tab`,this.parent=t;let n=this;this.dom.addEventListener(`click`,function(){n.parent.select(n.dom.id)})}},y=class extends r{constructor(){super(),this.dom.className=`Listbox`,this.dom.tabIndex=0,this.items=[],this.listitems=[],this.selectedIndex=0,this.selectedValue=null}setItems(e){Array.isArray(e)&&(this.items=e),this.render()}render(){for(;this.listitems.length;)this.listitems[0].dom.remove(),this.listitems.splice(0,1);for(let e=0;e<this.items.length;e++){let t=this.items[e],n=new b(this);n.setId(t.id||`Listbox-${e}`),n.setTextContent(t.name||t.type),this.add(n)}}add(){let e=Array.from(arguments);this.listitems=this.listitems.concat(e),t.prototype.add.apply(this,e)}selectIndex(e){e>=0&&e<this.items.length&&this.setValue(this.listitems[e].getId()),this.selectedIndex=e}getValue(){return this.selectedValue}setValue(e){for(let t=0;t<this.listitems.length;t++){let n=this.listitems[t];n.getId()===e?n.addClass(`active`):n.removeClass(`active`)}this.selectedValue=e;let t=new Event(`change`,{bubbles:!0,cancelable:!0});this.dom.dispatchEvent(t)}},b=class extends r{constructor(e){super(),this.dom.className=`ListboxItem`,this.parent=e;let t=this;function n(){t.parent&&t.parent.setValue(t.getId())}this.dom.addEventListener(`click`,n)}},x=class{constructor(e){this.id=-1,this.inMemory=!1,this.updatable=!1,this.type=``,this.name=``,this.editor=e}toJSON(){let e={};return e.type=this.type,e.id=this.id,e.name=this.name,e}fromJSON(e){this.inMemory=!0,this.type=e.type,this.id=e.id,this.name=e.name}},S=class extends x{constructor(e,t=null,n=null){super(e),this.type=`SetGeometryCommand`,this.name=e.strings.getKey(`command/SetGeometry`),this.updatable=!0,this.object=t,this.oldGeometry=t===null?null:t.geometry,this.newGeometry=n}execute(){this.object.geometry.dispose(),this.object.geometry=this.newGeometry,this.object.geometry.computeBoundingSphere(),this.editor.signals.geometryChanged.dispatch(this.object),this.editor.signals.sceneGraphChanged.dispatch()}undo(){this.object.geometry.dispose(),this.object.geometry=this.oldGeometry,this.object.geometry.computeBoundingSphere(),this.editor.signals.geometryChanged.dispatch(this.object),this.editor.signals.sceneGraphChanged.dispatch()}update(e){this.newGeometry=e.newGeometry}toJSON(){let e=super.toJSON(this);return e.objectUuid=this.object.uuid,e.oldGeometry=this.oldGeometry.toJSON(),e.newGeometry=this.newGeometry.toJSON(),e}fromJSON(t){super.fromJSON(t),this.object=this.editor.objectByUuid(t.objectUuid),this.oldGeometry=n(t.oldGeometry),this.newGeometry=n(t.newGeometry);function n(t){return new e().parseGeometries([t])[t.uuid]}}};export{n as _,u as a,c as b,t as c,p as d,y as f,l as g,i as h,g as i,h as l,a as m,x as n,d as o,f as p,m as r,r as s,S as t,s as u,_ as v,o as y};